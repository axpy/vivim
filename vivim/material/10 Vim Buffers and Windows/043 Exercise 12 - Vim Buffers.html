<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>043 Exercise 12 - Vim Buffers</title>
</head>
<body>
<div class="asset-container">
    <div class="asset-container__padding article-view">
        <div class="w3c-default">
            <p>Buffers</p>

<h4><strong><em>Goal:</em></strong></h4>



<p>The goal of this exercise is to give you practice working with multiple buffers.</p>

<h4><strong><em>Instructions:</em></strong></h4>



<h4><strong>Open the buf* files</strong></h4>



<p>First, start a command line session on your local machine.  Next, use vim to open all the files that start with "buf" that came in the course downloads.  To do that, navigate to the location of the file.  Remember this could be different for you depending on where you extracted the contents of the course archive.  This example assumes the course download was saved into your Downloads folder and extracted from there.</p>



<table><tbody><tr><td><p>cd Downloads</p><p>cd vimclass</p><p>vim buf*</p></td></tr></tbody></table>



<h4><strong>View the buffers</strong></h4>



<p>Look at your buffer list with either the <strong>:buffers</strong> command.  You can also use <strong>:files</strong> or <strong>:ls</strong> as they are all the same command.  Here is what you should see when you execute the command:</p>



<table><tbody><tr><td><p>:ls</p><p>  1 %a   "buf-ant.txt"                  line 1</p><p>  2      "buf-bed.txt"                  line 0</p><p>  3      "buf-cat.txt"                  line 0</p><p>  4      "buf-dad.txt"                  line 0</p></td></tr></tbody></table>



<h4><strong>Switch buffers</strong></h4>



<p>The <strong>:buffer</strong> command, or <strong>:b</strong> for short, allows you to switch buffers.  Open the buffer associated with the "buf-bed.txt" file by using it's unique number.  To do that, type <strong>:b2&lt;ENTER&gt;</strong>.</p>



<p>Now switch to the buffer associated with the "buf-cat.txt" file by using it's file name.  To do that, type <strong>:b buf-cat.txt&lt;ENTER&gt;</strong>.</p>



<p>Use tab completion to open the buffer associated with the "buf-dad.txt" file.  To do that, type <strong>:b&lt;SPACE&gt;&lt;TAB&gt;&lt;TAB&gt;&lt;TAB&gt;&lt;TAB&gt;&lt;ENTER&gt;</strong>.</p>



<p>Quickly return to the previously opened buffer by typing <strong>Ctrl-^</strong>.  You should now be looking at the contents of the "buf-cat.txt" file.</p>



<p>Look at your buffers with <strong>:ls&lt;ENTER&gt;</strong> and note the indicators.  Buffer 3 displays "%a" which means it's the buffer in the current window and it's active.  Buffer 4 displays "#" which makes it the alternative buffer.</p>



<table><tbody><tr><td><p>:ls</p><p>  1      "buf-ant.txt"                  line 1</p><p>  2      "buf-bed.txt"                  line 1</p><p>  3 %a   "buf-cat.txt"                  line 0</p><p>  4 #    "buf-dad.txt"                  line 1</p></td></tr></tbody></table>





<p>Switch back to buffer 4 with <strong>Ctrl-^</strong>.</p>



<p>Move to buffer 3 with the <strong>:bprevious</strong> command.  If you prefer, you can use the short version of the command by typing <strong>:bp&lt;ENTER&gt;</strong>.</p>



<p>Move to buffer 2 by typing <strong>:bp&lt;ENTER&gt;</strong>.</p>



<p>Now reverse the direction and move to the next buffer which is buffer 3 with the <strong>:bnext</strong> command or the short version, <strong>:bn&lt;ENTER&gt;</strong>.</p>



<p>Go to the first buffer in your buffer list with the <strong>:bfirst</strong> command.  Of course, you can use the short version by typing <strong>:bf&lt;ENTER&gt;</strong>.</p>



<p>No just to the last buffer in the buffer list with <strong>:blast</strong> or <strong>:bl&lt;ENTER&gt;</strong>.</p>



<h4><strong>Edit multiple buffers at once</strong></h4>



<p>Make a change to the current buffer.  For example, you could enter insert mode with <strong>i</strong> and then type some text such as <strong>dad</strong> and then return to normal mode by typing <strong>&lt;ESCAPE&gt;</strong>.</p>



<p>Try to switch to buffer 2 by typing <strong>:b2&lt;ENTER&gt;</strong>.  If you do not have the hidden option enabled, you will see an error message such as this:</p>



<table><tbody><tr><td><p>E37: No write since last change (add ! to override)</p></td></tr></tbody></table>



<p>Follow the instructions and type <strong>:b!2&lt;ENTER&gt;</strong>.  Now buffer 2 is loaded into the window.  Look at your buffers with <strong>:ls&lt;ENTER&gt;</strong>.  You'll notice the previous buffer has the indicators <strong>h</strong> and <strong>+</strong> which mean it is a hidden buffer with modifications.</p>



<table><tbody><tr><td><p>:ls</p><p>  1      "buf-ant.txt"                  line 1</p><p>  2 %a   "buf-bed.txt"                  line 1</p><p>  3      "buf-cat.txt"                  line 0</p><p>  4 #h + "buf-dad.txt"                  line 1</p></td></tr></tbody></table>



<p>Enable the hidden option by typing <strong>:set hidden&lt;ENTER&gt;</strong>.  Now make a change to this buffer.  For example, you could enter insert mode with <strong>i</strong> and then type some text such as <strong>bed</strong> and then return to normal mode by typing <strong>&lt;ESCAPE&gt;</strong>.</p>



<p>Switch to buffer 1 by typing <strong>:b1&lt;ENTER&gt;</strong>.  Notice that you did not get an error message.  Look at your buffers with <strong>:ls&lt;ENTER&gt;</strong>.  You'll now notice buffers 2 and 4 have the indicators <strong>h</strong> and <strong>+</strong> which mean they are hidden buffers with modifications.</p>



<table><tbody><tr><td><p>:ls</p><p>  1 %a   "buf-ant.txt"                  line 1</p><p>  2 #h + "buf-bed.txt"                  line 1</p><p>  3      "buf-cat.txt"                  line 0</p><p>  4  h + "buf-dad.txt"                  line 1</p></td></tr></tbody></table>



<h4><strong>Add and delete buffers</strong></h4>



<p>Open up the file named "nav.txt" for editing.  To do that type <strong>:e&lt;SPACE&gt;nav.txt&lt;ENTER&gt;</strong>.  Now the contents of the file "nav.txt" are loaded in the buffer display in your window.  You can list your buffers by typing <strong>:ls&lt;ENTER&gt;</strong>.  You should see the following:</p>



<table><tbody><tr><td><p>:ls</p><p>  1 #h   "buf-ant.txt"                  line 1</p><p>  2  h + "buf-bed.txt"                  line 1</p><p>  3      "buf-cat.txt"                  line 1</p><p>  4  h + "buf-dad.txt"                  line 1</p><p>  5 %a   "nav.txt"                      line 1</p></td></tr></tbody></table>



<p>Let's say you decided you don't want to edit the "nav.txt" file, so delete it by typing <strong>:bd&lt;ENTER&gt;</strong>.  Examine your buffers with <strong>:ls&lt;ENTER&gt;</strong>. Now your buffers will look like so:</p>



<table><tbody><tr><td><p>:ls</p><p>  1 %a   "buf-ant.txt"                  line 1</p><p>  2  h + "buf-bed.txt"                  line 1</p><p>  3      "buf-cat.txt"                  line 1</p><p>  4  h + "buf-dad.txt"                  line 1</p></td></tr></tbody></table>



<p>Delete the buffer with an ID of 3 by typing <strong>:bd3&lt;ENTER&gt;</strong>.  Examine your buffers with <strong>:ls&lt;ENTER&gt;</strong>. Now your buffers will look like so:</p>



<table><tbody><tr><td><p>:ls</p><p>  1 %a   "buf-ant.txt"                  line 1</p><p>  2  h + "buf-bed.txt"                  line 1</p><p>  4  h + "buf-dad.txt"                  line 1</p></td></tr></tbody></table>



<h4><strong>Use the Explorer</strong></h4>



<p>Use the explorer to open the "help.txt" file.  Start the explorer by typing <strong>:E&lt;ENTER&gt;</strong>.  Now, use the vim navigation commands you know to place your cursor under the file named "help.txt."  Finally, press <strong>&lt;ENTER&gt;</strong> to load the buffer into the current window.</p>



<p>Now discard this buffer with <strong>:bd&lt;ENTER&gt;</strong>.</p>



<h4><strong>Execute a command in all buffers</strong></h4>



<p>Perform a global substitution in all the buffers.  Remember that substitute command is <strong>:[range]s[ubstitute]/{pattern}/{string}/[flags]</strong>  Also remember that the range of <strong>%</strong> is the entire file and the <strong>g</strong> flag replaces all occurrences in the line.  So the global substitution command is effectively <strong>:%s/{old}/{new}/g</strong>.  Use this in combination with the <strong>:bufdo</strong> command to replace every <strong>#</strong> character with the <strong>@</strong> character.</p>



<p>To do that, type <strong>:bufdo %s/#/@/g&lt;ENTER&gt;</strong>.  Examine your buffers with <strong>:ls&lt;ENTER&gt;</strong>.  You should see that they've all been modified, indicated by the <strong>+</strong> character.  Quickly check that the substitution occurred in another buffer by typing <strong>:bf&lt;ENTER&gt;</strong>, which loads the first buffer.  It should look like the following:</p>



<table><tbody><tr><td>
<p>   @     @     @  @@@@@@@</p><p>  @ @    @@    @     @</p><p> @   @   @ @   @     @</p><p>@     @  @  @  @     @</p><p>@@@@@@@  @   @ @     @</p><p>@     @  @    @@     @</p><p>@     @  @     @     @</p>
<p>This training is provided by LinuxTrainingAcademy.com.</p></td></tr></tbody></table>





<h4><strong>Abandon your changes to all buffers</strong></h4>



<p>If you want to try this exercise again in the future, abandon all your changes with the  <strong>:qall!&lt;ENTER&gt;</strong> command.  If you want to do the opposite and save all your changes you can use the <strong>:wall</strong> command.</p>
        </div>
    </div>
</div>

</body>
</html>